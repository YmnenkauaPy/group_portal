{% extends 'base.html' %}

{% block content %}
<h1>{{ group.title }}</h1>
<p>{{ group.description }}</p>
<p>{{ group.created_at }}</p>
<p>Admin: {{ group.admin.username }}</p>
<h2>Members:</h2>
<ul>
    {% for member_info in members_with_roles %}
        <li>{{ member_info.user.username }} <small>{{ member_info.role }}</small> 
            {% if member_info.role != 'Moderator' and user == group.admin %}
            <a href="{% url 'add_moderator' group.pk member_info.user.pk %}">make moderator</a>
            {% endif %}
            {% if member_info.role != 'Member' and user == group.admin %}
            <a href="{% url 'remove_moderator' group.pk member_info.user.pk %}">delete from moderator</a>
            {% endif %}
        </li>
    {% empty %}
        <li>No members in this group</li>
    {% endfor %}
</ul>

<ul>
    <li><a href="{% url 'group_list' %}">Back to group list</a></li>
    {% if user == group.admin %}
    <li><a href="{% url 'update_group' group.pk %}">Update group list</a></li>
    <li><a href="{% url 'delete_group' group.pk %}">Delete group list</a></li>
    {% endif %}
</ul>

{% endblock %}
